---
import BaseLayout from '@/layouts/BaseLayout.astro'
import siteConfig from '@/site-config'
// 1. 导入Strapi函数
import { getStrapiBlogs } from '@/lib/strapi'
// 2. 在构建时获取数据
const latestStrapiBlogs = await getStrapiBlogs()
---
<BaseLayout description={siteConfig.description}>
  <article class="prose">
    <!-- 原有的标题和介绍内容保持不变 -->
    <h1 class="text-title">Vitesse theme</h1>
    <p>Vitesse theme for Astro, supports Vue and UnoCSS.</p>
    <!-- ... 中间你原有的所有段落内容保持不变 ... -->
    
    <!-- --- 新增部分：最新Strapi博客列表 --- -->
<hr class="hr-line" />
<h2>Latest from Strapi Blog</h2>
{
  latestStrapiBlogs.length > 0 ? (
    <ul>
      {latestStrapiBlogs.map((blog) => (
        <li>
          <a href={`/strapi-blog/${blog.slug}`} class="prose-link">{blog.title}</a>
          {blog.excerpt && <p class="text-sm opacity-75">{blog.excerpt}</p>}
        </li>
      ))}
    </ul>
  ) : (
    <p>No blog posts yet.</p>
  )
}
    <!-- --- 新增部分结束 --- -->
    
    <hr class="hr-line" />
    <!-- 原有的“Find me on”等社交链接部分保持不变 -->
    <p>Find me on</p>
    <p class="flex gap-x-4 gap-y-2 flex-wrap">
      {
        siteConfig.socialLinks.map((link) => (
          <a aria-label={link.text} href={link.href} target="_blank" class="prose-link">
            <i class:list={[link.icon]} />
            {link.text}
          </a>
        ))
      }
    </p>
    <!-- ... 其余原有内容 ... -->
  </article>
</BaseLayout>
